<!DOCTYPE html>
<html lang="zh">
  <head>
    <title>æ•°ç»„å»é‡å’Œæ’åº(Bubble sort)çš„é¡ºåº</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="renderer" content="webkit" />
    <meta name="force-rendering" content="webkit" />
  </head>
  <body>
    <script>
      const limit = 6000;
      let randomArray = Array.from({ length: limit }, (v, i) => {
        return parseInt(Math.random() * limit + 1);
      });
      console.log("randomArray:", randomArray);

      let randomArrayCoppy1 = [...randomArray];
      let randomArrayCoppy2 = [...randomArray];
      let randomArrayCoppy3 = [...randomArray];
    </script>
    <script>
      console.time("å…ˆå»é‡åæ’åº");
      function uniqueThenbubbleSort(array) {
        array = [...new Set(array)];
        const len = array.length;
        for (let i = 0; i < len; i++) {
          for (let j = 1; j < len - i; j++) {
            if (array[j - 1] < array[j]) {
              const temp = array[j];
              array[j] = array[j - 1];
              array[j - 1] = temp;
            }
          }
        }
        return array;
      }
      console.log(
        "\n\n",
        "uniqueThenbubbleSort(randomArrayCoppy1):",
        uniqueThenbubbleSort(randomArrayCoppy1)
      );
      console.timeEnd("å…ˆå»é‡åæ’åº");
    </script>
    <script>
      console.time("å…ˆæ’åºåå»é‡");
      function bubbleSortThenUnique(array) {
        const len = array.length;
        for (let i = 0; i < len; i++) {
          for (let j = 1; j < len - i; j++) {
            if (array[j - 1] < array[j]) {
              const temp = array[j];
              array[j] = array[j - 1];
              array[j - 1] = temp;
            }
          }
        }
        return [...new Set(array)];
      }
      console.log(
        "\n\n",
        "bubbleSortThenUnique(randomArrayCoppy2):",
        bubbleSortThenUnique(randomArrayCoppy2)
      );
      console.timeEnd("å…ˆæ’åºåå»é‡");
    </script>
    <script>
      console.time("å»é‡æ’åºåœ¨ä¸€èµ·ğŸ‘«");
      function bubbleSortUniqueTogether(array) {
        const len = array.length;
        const uniqueArray = [];
        for (let i = 0; i < len; i++) {
          for (let j = 1; j < len - i; j++) {
            if (array[j - 1] < array[j]) {
              const temp = array[j];
              array[j] = array[j - 1];
              array[j - 1] = temp;
            }
          }

          // ä½¿ç”¨ä¸¤ä¸¤æ¯”è¾ƒæ¥å†³å®šæ˜¯å¦å”¯ä¸€å€¼
          // æ–°æ³¡æ³¡, å’Œä¹‹å‰çš„æ³¡æ³¡æ¯”è¾ƒ, ä¸ç›¸åŒå°±æ”¾å…¥uniqueArray
          let sortedIndex = len - i - 1;
          let newBobble = array[sortedIndex];

          // é˜²æ­¢åªæœ‰ä¸€ä¸ªæ³¡æ³¡æ—¶æ•°ç»„è¶Šç•Œ(è™½ç„¶JS è¶Šç•Œçš„æ•°æ®éƒ½æ˜¯undefined, ä¸å½±å“ä¸šåŠ¡é€»è¾‘, ä½†è¿˜æ˜¯å…»æˆä¹ æƒ¯çš„å¥½)
          let oldBooble = NaN;
          if (sortedIndex + 1 < len) {
            oldBooble = array[sortedIndex + 1];
          }
          if (newBobble !== oldBooble) {
            uniqueArray.push(newBobble);
          }
        }
        return uniqueArray;
      }
      console.log(
        "\n\n",
        "bubbleSortUniqueTogether(randomArrayCoppy3):",
        bubbleSortUniqueTogether(randomArrayCoppy3)
      );
      console.timeEnd("å»é‡æ’åºåœ¨ä¸€èµ·ğŸ‘«");
    </script>
  </body>
</html>
