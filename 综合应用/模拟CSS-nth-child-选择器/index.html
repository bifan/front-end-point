<!DOCTYPE html>
<html lang="zh">
  <head>
    <title>æ¨¡æ‹ŸCSS-nth-child-é€‰æ‹©å™¨</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="renderer" content="webkit" />
    <meta name="force-rendering" content="webkit" />
    <style>
      body {
        background-color: #333;
        display: flex;
        flex-wrap: wrap;
        counter-reset: nth-cool;
      }
      /*
        :nth-child()
          0n+3 æˆ–3 â†’ åŒ¹é…ç¬¬ä¸‰ä¸ªå…ƒç´ 
          1n+0 æˆ–n â†’ åŒ¹é…æ¯ä¸ªå…ƒç´ 
      */
      /* body > :nth-child(1n + 0) ä¼šå½±å“<script> æ ‡ç­¾, ä¿®æ”¹display å¯¼è‡´JS ä»£ç æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š, ä¸€è„¸æ‡µé€¼â— */
      /* åªå¥½ç”¨:not æ’é™¤ */
      body > :nth-child(1n + 0):not(script):not(p) {
        height: 100px;
        width: 100px;
        margin: 2px;
        background-color: #ccc;

        /* ä½¿å¾— ::before content çš„å†…å®¹å‚ç›´å±…ä¸­ */
        display: flex;
        justify-content: center;
        align-items: center;
      }
      /* ä¸Šé¢çš„é€‰æ‹©å™¨åŠ äº†:not() æƒé‡å˜å¤§äº†, äºŒè„¸æ‡µé€¼â— åªå¥½éƒ½åŠ ä¸Šäº†, ä¸ºäº†ç»ƒä¹ ä¼ªç±»å¢åŠ äº†å¤æ‚åº¦ ğŸ˜Ÿ*/
      body > :nth-child(2n + 1):not(script):not(p) {
        background-color: lightcoral; /* ä¹Ÿå¯ä»¥ç”¨ !important å¢åŠ æƒé‡ */
      }
      body > :nth-child(n):not(script):not(p)::before {
        counter-increment: nth-cool;
        content: counter(nth-cool);
        color: #333;
        font-size: 1.5em;
        font-weight: bold;
      }
      /* p æ˜¯ä¸ºäº†æ˜¾ç¤ºJS çš„ç»“æœ */
      p {
        position: fixed;
        left: 0;
        bottom: 0;
        padding: 5px;
        background-color: #ccc;
      }
      p > span {
        background-color: lightcoral;
      }
    </style>
  </head>
  <body>
    <header></header>
    <main></main>
    <footer></footer>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <script>
      /*
        æ¨¡æ‹Ÿnth ç®—æ³• ğŸ˜„
        body > :nth-child(2n+1)
          2 æ˜¯groupSize, å¤šå°‘ä¸ªå…ƒç´ ç®—ä¸€ç»„
          1 æ˜¯itemIndex, æ¯ç»„ä¸­çš„ç¬¬å‡ ä¸ª
          n æ˜¯ä¸Šä¸€æ¬¡è®¡ç®—çš„ç»“æœ, åˆå§‹ä¸º0
      */
      function nth(elements, groupSize, itemIndex) {
        let n = 0;
        const limit = elements.length;
        const nthList = [];
        while (n < limit) {
          nthList.push(n + itemIndex); // +1
          n = groupSize + n; // 2n
        }
        return nthList;
      }

      const elements = document.querySelectorAll(
        "body > :nth-child(1n + 0):not(script):not(p)"
      );
      console.log("nth(elements, 2, 1): ", nth(elements, 2, 1));
      const ele = document.createElement("p");
      ele.style.display = "block";
      ele.innerHTML =
        `æ¨¡æ‹Ÿbody > :nth-child(2n + 1)<br><br>` +
        `nth(eles, 2, 1):<br>` +
        `<span>${nth(elements, 2, 1)}</span><br><br>` +
        `å¯ä»¥çœ‹åˆ°ç»“æœå’Œ<span>çº¢è‰²æ–¹å—</span>çš„æ•°å­—ä¸€æ ·ğŸ˜™`;
      document.body.append(ele);
    </script>
  </body>
</html>
